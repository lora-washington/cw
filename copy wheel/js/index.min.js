$(async function(){Telegram.WebApp.ready(),Telegram.WebApp.expand(),Telegram.WebApp.isClosingConfirmationEnabled=!0,window.SLS_Tracker&&(E=new SLS_Tracker({host:"ap-southeast-1.log.aliyuncs.com",project:"findo",logstore:"findo-store",time:10,count:10,topic:"Saki",source:"telegram"}));var E,n,j,e,m=$("#popup"),r=$("#mask"),c=$(".loading"),l=$("#imps"),Y=$("#imps .msgBtn"),G=$("#imps .save"),_=$("#header span.red-dot1"),J=$("#header span.red-dot2"),p=$("#progress"),z=$("#isSkip"),q=$(".rotate .skip-checkbox"),d=$(".rotate .task-icon"),s=$(".rotate .countdown"),a=$(".rotate .treasure"),t=$(".rotate .shareWrap > .share"),H=$(".rotate .shareWrap > .link"),g=$("ul.prize"),h=$("#lottery"),o=$("#danmubox"),Z=!1,K={top:4,speed:8,danmu:"",pool:[]};let v=null,u=null,V=null,f=null,X=null;let Q=null,aa=null,ea=null,ia=!1,ta=!1,na=!1,sa=0,b=0,la,oa=0,ca=5,w={},ra={},y={},da=[],k={diamonds:0},pa=1e3,A="PRO",C={DEV:{API_HOST:"https://tgs-qa.laviein.com",tgChannel:"ldtestch",tgChannelId:"-1002006205168",tgBotName:"findotest2bot",tgBotId:"7441759058",tgUserId:"5924847695",initData:"user=%7B%22id%22%3A6771660446%2C%22first_name%22%3A%22asaki%22%2C%22last_name%22%3A%22%22%2C%22username%22%3A%22asakikii%22%2C%22language_code%22%3A%22zh-hans%22%2C%22allows_write_to_pm%22%3Atrue%7D&chat_instance=-2913404562499236152&chat_type=sender&auth_date=1723544782&hash=28cbadeb51962cfd862d9ef37ec7235be294a0beea58f7ffa8b61952fa291ebe",hash:"28cbadeb51962cfd862d9ef37ec7235be294a0beea58f7ffa8b61952fa291ebe"},QA:{API_HOST:"https://tgs-qa.laviein.com",tgChannel:"ldtestch",tgChannelId:"-1002006205168",tgBotName:"findotest2bot",tgBotId:"7441759058",tgUserId:Telegram.WebApp.initDataUnsafe.user?.id,initData:Telegram.WebApp.initData,hash:Telegram.WebApp.initDataUnsafe.hash},PRO:{API_HOST:"https://tgsing.livout.in",tgChannel:"findolucky",tgChannelId:"-1002220647875",tgBotName:"findoluckybot",tgBotId:"6665870700",tgUserId:Telegram.WebApp.initDataUnsafe.user?.id,initData:Telegram.WebApp.initData,hash:Telegram.WebApp.initDataUnsafe.hash}},ma="8ecd72abb64f0ec1bbff880e1c416a9bd40aac78",ga=function(){try{var a,e,i,t,n,s=new URLSearchParams(window.location.search);return s?(a=s.get("tgWebAppStartParam"))&&(e=function(a){a=CryptoJS.enc.Base64.parse(a),a=CryptoJS.enc.Utf8.stringify(a);return a}(decodeURIComponent(a)))?.includes("_")&&2===(i=e.split("_")).length&&([t,n]=i,/^\d*$/.test(t))&&/^\d+$/.test(n)?t:"":""}catch(a){return""}}(),ua=C[A].API_HOST,ha=C[A].tgChannel,va=C[A].tgChannelId,I=C[A].tgUserId,fa=C[A].tgBotId,ba=C[A].initData;C[A].hash;let wa=Telegram.WebApp.initDataUnsafe.user?.first_name+" "+(Telegram.WebApp.initDataUnsafe.user?.last_name||"");void 0!==window.VConsole&&"PRO"!==A&&new window.VConsole;let T={add(){return+Array.from(arguments).reduce((a,e)=>new Big(a).plus(new Big(e))).toString()},sub(){return+Array.from(arguments).reduce((a,e)=>new Big(a).minus(new Big(e))).toString()},mul(){return+Array.from(arguments).reduce((a,e)=>new Big(a).times(new Big(e))).toString()},divide(){return+Array.from(arguments).reduce((a,e)=>new Big(a).div(new Big(e))).toString()}};function x(a,e=3e3){let i=document.createElement("div");i.textContent=a,i.classList.add("tipBox"),document.body.appendChild(i),setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{i.remove()},1e3)},e)}function ya(){r.html(""),r.removeClass("nopad"),$(".shareWrap").show(),$(".ring.running").show(),r.css("display","flex"),c.css("display","flex")}async function ka(a,e){var i={...e.headers,"Content-Type":"application/json",bid:fa,bkey:ba,cip:u},t=function(a){let t={};return a&&Object.entries(a).forEach(a=>{var[a,e]=a;let i=e;void 0===(i="string"==typeof e?e.trim():i)||""==i||null==i||Array.isArray(i)&&0===i.length||(t[a]=i)}),t}(e?.body);return t.signature=function(e){let a=Object.keys(e).sort(),i=a.map(a=>`${a}=${e[a]}&`).join("");i+="key="+ma;var t=CryptoJS.MD5(i);return t.toString(CryptoJS.enc.Hex)}(t),e.method=e.method||"POST",{...e,headers:i,body:JSON.stringify(t)}}async function S(a,e={}){a=/^https?:\/\//i.test(a)?a:ua+"/api/rest/tgs"+a,e=await ka(0,e);return async function(a){if(a.ok){var e=await a.json();if(200!==e.code&&(10009===e.code||10024!==e.code&&10037!==e.code))throw x(e.message),c.css("display","none"),new Error(e.code);return e}throw x((e=await a.json()).message),new Error(e?.message)}(await fetch(a,e))}function W(a){var e=(new Date).getTime();E?.send({eventType:a,tgUserId:I,source:"channel",timestamp:e,project:fa,inviteTgUserId:ga})}function $a(){S("/user/getUserInfo").then(({data:a})=>{var e,i,t;e=a?.appId,a=a.id,e&&(na=!0,i=window.LavieSDK,t={debug:!0,fromTgs:!0,appId:e,userId:String(a),token:ba},"PRO"===A&&(t.debug=!1,t.host="wss.hayyamm.com"),i.lavieSdkInit(t),i.addMsgListener(i.MESSAGE_TYPE.ROOM_MESSAGE,a=>{var{msgId:a,data:e}=a,{inviteLink:i,channelId:e}=e;if(1002==a)switch(e){case va:D(!0);break;case f:i&&Ma()}}),t=String(fa)+String(I),i.accountLoginHandle({appId:e,token:ba,userInfo:{id:a,userId:String(a)}},t))}).catch(a=>{Telegram.WebApp.showAlert("Network Error, Please Reload Page")})}function N(s){clearInterval(ea),r.find(".switch > p").html('<img src="image/time.png"><span></span>');let l=()=>new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),23,59,59,999).getTime(),o=()=>{var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(7-a.getDay()),23,59,59,999).getTime()},c=("Daily"===s?l:o)();var a=()=>{var a=(new Date).getTime();let e=c-a;e<0&&(i=(new Date).getTime(),$.ajax({url:"data/rank.json?v="+i,dataType:"json",async:!1,success:function(a){ra=a},error:function(){x("data update error")}}),c=("Daily"===s?(L("today"),l):(L("week"),o))(),e=c-a);var i=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),t=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3),a="Daily"===s?`${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:`+n.toString().padStart(2,"0"):`${i}Day ${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:`+n.toString().padStart(2,"0");r.find(".switch > p > span").text(a)};a(),ea=setInterval(a,1e3)}function Aa(){if(v){if(I)return 1;Telegram.WebApp.showAlert("Network Error, Please Reload Page")}else x("No Activity Id")}function Ca(e,i=4){var t,n=[];for(let a=0;a<i;a++){var s=(s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz").charAt(Math.floor(Math.random()*s.length))+"***",l=(l=void 0,l=(t=e)*(.1*Math.random()+.7),t=t.toString().split(".")[1]?.length||0,t=Math.pow(10,t),Math.floor(l*t)/t);n.push({username:s,win:l})}return n.sort((a,e)=>e.win-a.win),n}function Ia(n,s,l,o,c,r){let d=null;function p(a){a=(""+a).match(/(?:\.(\d+))?$/);return a&&a[1]?a[1].length:0}requestAnimationFrame(function a(e){var e=e-(d=d||e),i=(i=e/o,--i*i*i+1);let t=parseFloat((s+i*(l-s)).toFixed(p(l))).toFixed(p(l));if(r?n.text(t):n.css("width",t+"%"),e<o)requestAnimationFrame(a);else{let a=l.toFixed(p(l));r?n.text(a):n.css("width",a+"%"),"function"==typeof c&&c()}})}function Ta(){S("/gift/startAndGetCountdownRecord").then(({data:a})=>{let{leftTimes:e,countdownTime:t,newUserCanCreateNewTaskFlag:i}=a||{};(null!=t||i)&&0<e?(d.css({top:"40px"}),s.css({display:"flex"}),n&&clearInterval(n),t<=0?(ia=!0,s.find(".spin").html("Get <br />+1 Spin"),s.find(".spin").css({width:"56px",background:"linear-gradient(180deg, #FFC700 0%, #FF8A00 100%)"}),n=setInterval(function(){s.find(".gift > img").toggleClass("running")},2e3)):(s.find(".spin").css({background:"rgba(0, 0, 0, 0.5)",bottom:"-18px",width:"62px"}),aa=setInterval(()=>{var a,e,i;a=t,e=Math.floor(a/36e5),i=Math.floor(a/6e4%60),a=Math.floor(a/1e3%60),0==e&&0==i&&0==a?(clearInterval(aa),ia=!0,s.find(".spin").html("Get <br />+1 Spin"),s.find(".spin").css({width:"56px",background:"linear-gradient(180deg, #FFC700 0%, #FF8A00 100%)"}),n=setInterval(function(){s.find(".gift > img").toggleClass("running")},2e3)):(e=`${e.toString()} : ${i.toString().padStart(2,"0")} : `+a.toString().padStart(2,"0"),s.find(".spin").html(e+"<br />+1 Spin")),t-=1e3},1e3))):(d.css({top:"-28px"}),s.hide())})}function D(l,o){var a={};ga&&(a.inviteUserId=ga),I?(l&&(m.css("display","none"),c.css("display","flex")),clearInterval(j),clearInterval(ea),S("/activity/initActivity",{body:a}).then(({data:a})=>{var{activity:a,userPrizeWithdrawList:e,userAccount:i,inviteUser:t}=a||{},{times:n,receivedTimes:s}=i||{};v=a?.id,g.html(""),a?.prizes?.forEach(a=>{g.append(`<li style="background-image: url('${a.img}');"><p>${a.name}</p></li>`)}),o&&(c.css("display","flex"),S("/activity/doubling",{body:{doubling:!0}}).then(({})=>{B("happy"),D()}).finally(()=>{c.css("display","none")})),na||$a(),e?.length&&function a(e){let i=[...e];let t=$.extend({},K,{pool:e});j=setInterval(()=>{e.length?xa(t,e.shift()):(clearInterval(j),a(i))},3500)}(e.map(a=>({danmu:`<img class="icon" src="image/big-flower.png" alt="" />${a.firstName} withdraw <span>‚Çπ ${a.withdrawAmount}</span>!`}))),Sa(i),R(n),l&&(a=s,e=t,{balance:i=0}=w,w?.inChannel?0==a?B("happy"):!y||y.todayIsSign||y.isOver?100<=i&&(B("winning",{win:parseFloat(i),sub:!1}),Da()):(B("daily"),P()):0==a?e?B("join",{user:e}):B("join"):B("findo"))}).catch(a=>{Telegram.WebApp.showAlert(`Network Error(${a}), Please Reload Page`)}).finally(()=>{c.css("display","none")})):Telegram.WebApp.showAlert("Network Error, Please Reload Page")}function xa(a,e){var i=Math.floor(o.height()/30),t=(o.width(),o.height()/i),a=$.extend({},a,e);let n=$("<div>",{class:"danmu-item",css:{top:Math.floor(Math.random()*i)*t+a.top+"px"}});n.append($("<div>",{class:"content",html:""===a.danmu.trim()?K.danmu:a.danmu.trim()})),n.appendTo(o);e=o.width()+n.width();n.css("transition",`transform ${a.speed}s linear`),n.css("transform",`translateX(-${e}px)`),n.on("transitionend",()=>{n.remove()})}function R(a){w.times=a,h.find("span").text(a),a?(h.find("img").show(),t.find("img.halo").hide(),t.find("img.finger").hide()):(h.find("img").hide(),t.find("img.finger").show(),t.find("img.halo").show());var e=localStorage.getItem("skip");e?(q.css("display","flex"),z.prop("checked",1==e)):20<=a&&(localStorage.setItem("skip",0),q.css("display","flex"),z.prop("checked",!1))}function Sa(a){Wa(w=a),a?.balance<=0?J.hide():J.show()}function Wa(a){var{drawAmount:a,activityLimitAmount:e}=a,i=String((a/e*100).toFixed(2));p.find(".balance > span").text("‚Çπ"+parseFloat(a)),p.find("p > span").text("‚Çπ"+T.sub(e,a)),p.find("p > i").text("‚Çπ"+parseFloat(e)),p.find(".line > .fill").css("width",i+"%")}async function Na(){var a;w?.inChannel?Aa()&&!Z&&(a={activityId:v},u&&(a.clientIP=u),c.css("display","flex"),h.prop("disabled",!0),S("/activity/userPrize",{body:a}).then(({data:a,code:e})=>{var i,t;10024===e?(h.prop("disabled",!1),{drawAmount:e,activityLimitAmount:t}=a,Pa(T.sub(t,e),t)):(W("userPrize"),a.times>=w.times&&_.show(),e=45*(8-a.prizeId+1),i=a,(t=localStorage.getItem("skip"))&&1==t?Ra(i):(Z=!0,g.stopRotate(),g.rotate({angle:0,duration:3e3,animateTo:e+1080,callback:function(){Ra(i)}})))}).catch(()=>{h.prop("disabled",!1)}).finally(()=>{c.css("display","none")})):B("findo")}function Da(){window.HTMLCanvasElement&&(confetti({particleCount:120,angle:60,spread:55,origin:{x:0}}),confetti({particleCount:120,angle:120,spread:55,origin:{x:1}}))}function Ra(a){h.prop("disabled",!1),Z=!1;var{doublingExpectValue:a,balance:e,canWithdraw:i,activityLimitAmount:t,drawAmount:n,price:s,prizeType:l,times:o,waitAuditAmount:c,withdrawnAmount:r}=a,s=parseFloat(s),d=T.sub(n,s),p=T.sub(t,n),m=T.sub(t,d),g=Number((d/t*100).toFixed(2)),u=Number((n/t*100).toFixed(2));prevAmount={got:s,prevDrawAmount:d,prevLeft:m,left:p,prevPercentage:g,percentage:u},w.times=o,w.balance=e,w.drawAmount=n,w.waitAuditAmount=c,w.withdrawnAmount=r,w.activityLimitAmount=t,Q=s,i?(b=a,localStorage.removeItem("decimal"),I%2!=0&&1===v?B("wish",{win:parseFloat(e)}):(D(),B("winning",{win:parseFloat(e),sub:!0}))):2==l?(B("rupee10"),Da(),Wa(w),R(o)):(3==l?(B("double",{got:s}),Da):Oa)()}function P(){!y.todayIsSign||0<U()?a.find(".red-dot2").show():a.find(".red-dot2").hide(),r.find(".redeem-total").text(parseInt(k.diamonds)),U()?(r.find(".redeem .r > button").removeClass("disabled"),r.find(".redeem .r > i").removeClass("none")):(r.find(".redeem .r > button").addClass("disabled"),r.find(".redeem .r > i").addClass("none"))}function Pa(t,n){S("/activity/zeroTimePopWindow").then(({data:a})=>{r.html(""),r.css("display","flex");var{parent:a,parentParent:e,accountWithdrawRankingList:i}=a||{},i=[...i];i.unshift(e),i.unshift(a),F("nospin",{left:t,target:n,help:(e=(e=t).toString(),(a=localStorage.getItem("decimal"))?a==e:((a=/^\d+\.\d{2}$/.test(e))&&localStorage.setItem("decimal",e),a)),list:i})})}function Oa(){var{activityLimitAmount:a,drawAmount:e,times:i}=w||{},e=T.sub(a,e);B("got",{got:Q,left:e,target:a}),Da(),Wa(w),R(i)}function La(){S("/task/getSignTask").then(({data:a})=>{y=a,P()})}async function Fa(){var a=(await S("/task/getTaskList")).data;a&&(da=a)}function Ba(){ya(),S("/activity/getApplyWithdrawRecord",{body:{pageSize:1e3,pageNo:1}}).then(({data:a})=>{F("withdrawal",a)}).finally(()=>{c.css("display","none")})}function O(e){ya(),async function(){var a;if(Aa())return a=(await S("/activity/userAccount",{body:{activityId:v}}).catch(a=>{Telegram.WebApp.showAlert(`Network Error(${a}), Please Reload Page`)})).data,Sa({...a,inChannel:w?.inChannel}),a}().then(a=>{F("wallet",a),e&&B("happy",{btnTxt:"OK"})}).finally(()=>{c.css("display","none")})}function Ma(){Aa()&&(V?f?(m.css("display","none"),c.css("display","flex"),S("/activity/checkInChannelAddTimes",{body:{activityId:v,channelName:V,channelId:f}}).then(({data:a})=>{a?.comeLateFlag?B("late"):a?.needAddTimesFlag?(d.css("display","none"),R((w?.times||0)+1),B("happy",{chance:1})):B("join",{chance:1})}).finally(()=>{c.css("display","none")})):x("No Channel Id!"):x("No Channel Name!"))}function Ua(t){t||ya(),S("/activity/inviteHistory").then(({data:a})=>{var{inviteCount:e=0,inviteHistoryList:i=[]}=a||{};a&&e&&(sa=e),t||F("inviteList",{invites:i,inviteCount:e})}).finally(()=>{c.css("display","none")})}function Ea(e){c.css("display","flex"),S("/task/receiveTaskAward",{body:{taskId:y.id}}).then(({data:a})=>{a?(La(),k.diamonds=Number(k.diamonds)+Number(a.award),e?(m.css("display","none"),B("getdiamond",a),setTimeout(()=>{m.css("display","none");{var{img:t,count:n,left:s,top:l,target:o,time:c}={img:"image/big-diamond.png",count:6,left:"50%",top:"50%",target:".treasure"};let a=$("#fixed-fly-area"),e="";for(i=0;i<n;i++)e+=`<div class="fixed-fly-area" style="${s?"left:"+s+";":""} ${l?"top:"+l+";":""} ">
        <img src="${t}" />
      </div>`;a.html(e);{var[r,d,p=1]=[".fixed-fly-area",o,c];let a=document.querySelector(r),i=document.querySelectorAll(r),e=document.querySelector(d),t=e.getBoundingClientRect(),n=a.getBoundingClientRect(),s=parseInt((t.left+t.right)/2)+parseInt(n.width/2),l=parseInt((t.top+t.bottom)/2)-parseInt(n.height/2);if(i.length){let e=0;for(let a of i)setTimeout(()=>{a.style.top=l+"px",a.style.left=s+"px",a.style.transition=`left ${p}s cubic-bezier(0.53, 0.05, 0.36, 1), top ${p}s cubic-bezier(0.16, 1.11, 1, 1), transform ${p}s cubic-bezier(0.42, 0.12, 0.02, 1.2)`,a.style.transform="scale(0)"},60*e),e++}setTimeout(()=>{e.style.animation="shakeX 1s 2",$("#fixed-fly-area").html("")},1e3*p);return}}},1800)):(B("getdiamond",a),setTimeout(()=>{m.css("display","none")},1800),r.find(".redeem .l > span").text(""),r.find(".dailyWrap li.today").removeClass("today").addClass("finish").children().eq(1).replaceWith('<img src="image/checkmark.png">'),r.find(".dailyWrap").children().eq(1).replaceWith('<span class="action">Come Back Tomorrow</span>')),P()):x("Already signed in")}).finally(()=>{c.css("display","none")})}function ja(a,i=!1){return a?.map((a,e)=>`<li><div class="l">${e<3?`<img src="image/rank${e+1}.png" alt="" />`:`<span class="index">${e+1}</span>`}<span class="name">${i?a.firstName:a[0]}</span></div>
            <div class="r"><span class="${i?"":"num"}">${i?"‚Çπ"+a.withdrawAmount:a[1]}</span>${i?'<img src="image/money.png" alt="" />':"üë§"}</div></li>`).join("")}function L(a){"top10"===a?(c.css("display","flex"),S("/account/queryWithdrawRank").then(({data:a})=>{a=ja(a,!0);r.find("ul.rankList").html(a)}).finally(()=>{c.css("display","none")})):(a=ja(ra[a]),r.find("ul.rankList").html(a),r.find(".rankWrap").animate({scrollTop:0},"slow"))}function F(a,t){switch($(".shareWrap").hide(),$(".ring.running").hide(),c.css("display","none"),a){case"nospin":var n=t.list?.map((a,e)=>a?`<li class="${0==e?"bgBlue":""}"><div class="l"><img src="image/avatar.png" /><span>${a.firstName}</span></div>
            <div class="r">withdraw <span>‚Çπ${a.amount}</span></div>${1==e?'<div class="mark">Your May Know</div>':""}${0==e?'<div class="mark">Your Friend</div>':""}</li>`:"<div></div>");r.html(`<div class="nospin" style="padding-top: 53px;">
            <p><span class="num">‚Çπ${t.left}</span> left to withdraw <span class="num">‚Çπ${t.target}</span>! <br/>
            ${t.help?'<span class="mini">Expect to withdraw after<i>inviting two friends</i></span>':"They have successfully withdrew!"}</p>
            <ul class="items">${n.join(" ")}</ul><div class="user" style="background: rgba(0,0,0,.5)">
            <div class="l"><img src="image/avatar.png" /><span>${wa}</span></div>
            <div class="r"><div class="win">Win <span>‚Çπ${T.sub(t.target,t.left)}</span></div><p><span>‚Çπ${t.left}</span> left to withdraw ‚Çπ${t.target}</p></div>
            <div class="mark">You</div>
            </div><img class="cancel" src="image/close.png" alt="" /></div>
          <button class="close"><img src="image/spin.png" />Invite For Spins</button>`);break;case"super":n=t.list?.map((a,e)=>`<li><div class="l"><img src="image/avatar.png" /><span>${a.username}</span></div>
            <div class="r">Win <span>‚Çπ${a.win}</span></div></li>`);r.html(`<div class="super">
            <p>Your luck exceeds <span class="num">99%</span> of users!<br />It is <span>Super Easy</span> for you to withdraw!</p>
            <ul class="items">${n.join(" ")}</ul>
            <div class="user">
            <div class="l"><img src="image/avatar.png" /><span>${wa}</span></div>
            <div class="r"><div class="win">Win <span>‚Çπ${t.win}</span></div><p><span>‚Çπ${t.left}</span> left to withdraw ‚Çπ${T.add(t.win,t.left)}</p></div>
            <div class="mark">You</div>
            </div>            
            </div><button class="close">OK</button>`);break;case"rule":r.html(`<div class="inner">
          <div class="topic"><span><img src="image/icon-rule.png" alt="" /> Game Rules</span></div>
          <p>Welcome to FindoLucky! Here are rules you need to know:</p>
          <h4>Here are the rules:</h4>
          <p>1. Everyone will get 3 free spins.</p>
          <p>2. Once you've used up all your spins, don't worry! You can earn extra spins by inviting your friends! When the person you invite joins the channel, you will get an additional spin.</p>
          <p>3. You can earn different amounts with each spin.It's depend on your luck! Once a certain amount is reached, you can cash out. It will take 1-7 working days for manual review.</p>
          <p>4. FindoLucky holds all rights to rules interpretation.</p>
          <h4>Let the spinning fun begin!</h4></div><button class="close">Close</button>`);break;case"rank":r.html(`<div class="inner">
          <div class="topic"><span class="mini"><img src="image/icon-rank.png" alt="" /><i>Daily Invitation Top 100</i></span></div></div>
          <ul class="invitation"><li class="active">Daily Invitation</li><li>Weekly Invitation</li></ul>
          <div class="switch"><p></p><div class="latitude"><span>Today</span><img src="image/switch.png"></div></div>
          <div class="rankWrap"><ul class="rankList">${ja(ra.today)}</ul></div>
          <button class="close">Close</button>`),N("Daily");break;case"gems":{n=t.tasks?.map((a,e)=>`<li><div class="l"><img src="${a.icon}" alt="" /><span>${a.taskIllustrate}</span></div>
            <div class="task-item-${a.id} ${2==a.canReward?"r row":"r"}">${2==a.canReward?`<img src="image/checkmark.png" alt="" /><span>+${a.award}</span>`:`<button class="btn action" data-type="${a.category}" data-task="${a.id}" data-demand="${a.demand}">GO</button><button class="btn action recive ${a.canReward?"":"disabled"}" data-status="${a.canReward}" data-task="${a.id}"><img src="image/diamond.png"/>+${a.award}</button></div>`}</li>`);let e=y.signDays;var s=y.isOver;let i=function(a){return e.includes(a)?"finish":y?.signTimes==a+1?"today":a<y?.signTimes?"skip":""};var l=U(),o=y?.awardList?.map((a,e)=>`<li class="${i(e)}"><span>Day ${e+1}</span>
          ${"today"==i(e)?y.todayIsSign?'<img src="image/checkmark.png" />':'<div class="light "><img src="image/diamond.png" /><img class="running" src="image/light.png" /></div>':""}
          ${"finish"==i(e)?'<img src="image/checkmark.png" />':""}
          ${"finish"!=i(e)&&"today"!=i(e)?'<img src="image/diamond.png" />':""}
          
          <span>+${a}</span></li>`);r.html(`<div class="inner inner-task">
          <div class="topic"><span><img src="image/box.png" alt="" />My Gems</span></div></div>
          <div class="gemsWrap">
            <div class="redeem">
              <div class="l"><img src="image/diamond.png"/><span class="redeem-total">${k.diamonds}</span></div>
              <div class="r"><button class="${l?"":"disabled"}">Redeem Spins</button><span>( 1000 <img src="image/diamond.png"/>=1spin )</span><i class="${l?"":"none"}"></i></div>
            </div>
            <div class="title">Daily Rewards<img src="image/loop.png"><img src="image/loop.png"></div>
            <div class="dailyWrap">
              <ul class="${s?"none":""}">
                ${o.join(" ")}
              </ul>
              ${s?"":y.todayIsSign?'<span class="action">Come Back Tomorrow</span>':'<button class="action">Claim</button>'}
              ${s?'<div class="daliy-finish"></div><p>Daily Rewards event is over.<br/>Invite friends to earn more cash!</p>':""}
            </div>
            <div class="task-title-box">
              <h4>Task List</h4>
              <div class="refresh-box"><img src="image/refresh-icon.png"/></div>
            </div>
            <ul class="taskList">${n.join(" ")}</ul>
          </div>          
          <div class="close-box"><button class="close">Close</button></div>`);break}case"inviteList":l=t.invites?.map(a=>`<li><div class="nickname">üë§ &nbsp;${a.name} </div><div class="${a.inChannelFlag?"channel yes":"channel no"}">
            <span>${a.inChannelFlag?"Yes":"No"}</span><button class="remind">Remind</button></div></li>`);r.html(`<div class="inner">        
          <div class="topic"><span><img src="image/invite.png" alt="" /> Invitation History</span><img class="inviteRefresh" src="image/icon-refresh.png"></div>
          <h3>You have invited <span>${t.inviteCount||0}</span> friends:</h3><p class="tip">If the person you invite doesn‚Äôt join our channel, you can‚Äôt get spins! (Recent 50 Invitations)</p></div>
          <div class="invites"><div class="title"><span>Name</span><span>Join Channel</span></div><div class="border"></div><ul>${l.join(" ")}</ul></div>
          <button class="close">Close</button>`);break;case"wallet":r.html(`<div class="inner">
          <div class="topic">
            <span><img src="image/icon-gold.png" alt="" /> Cash Out</span>
          </div>
          <ul class="wallet">
            <li>
              <span>To Be Cashed Out:</span>
              <span>‚Çπ${t.balance||0}</span>
            </li>
            <li class="border"></li>
            <li>
              <span>Success withdrawal:</span>
              <span>‚Çπ${t.withdrawnAmount||0} </span>
            </li>
            <li class="border"></li>
            <li>
              <span>Under Review:</span>
              <span>‚Çπ${t.waitAuditAmount||0} </span>
            </li>
          </ul>
          <button class="recordList"><span>Withdrawal Record</span> <img src="image/arrow.png" alt="" /></button>
          <div class="accountInfo">
            <div class="top">
              <div class="l"><img src="image/card.png" alt="" /><span>Account Info</span></div>
              <button class="r"><img src="image/edit.png" alt="" /><span>Edit</span></button>
            </div>
            <div class="border"></div>
            <div class="item">
              <span>Name:</span>
              <span>${t.name||""}</span>
            </div>
            <div class="item">
              <span>UPI ID:</span>
              <span>${t.upi||""}</span>
            </div>
            <div class="item">
              <span>Mobile Number:</span>              
              <span>${t.phoneZone?`+${t.phoneZone} `+t.mobile:t.mobile}</span>
            </div>
          </div>
          </div>
          <div class="groupBtn">
            <button class="back">Close</button>
            <button class="save">Cash Out</button>
          </div>
        `);break;case"withdrawal":{let n=t?.length||0;o=t?.map((a,e)=>{let i="";switch(a.status){case 0:i='<span class="review">Under Review</span>';break;case 10:i='<span class="success">Success</span>';break;case 5:i='<span class="reject">Reject</span>';break;case 15:case 16:i='<span class="reject">Fail</span>'}return`<div class="item">
              <div class="info">
                <div class="amount"><img src="image/icon-gold.png" alt="" /><span>‚Çπ${a.applyAmount}</span></div>
                <div class="status">${i}</div>
              </div>
              <div class="tip">${t=a.gmtCreate,t=new Date(t),new Intl.DateTimeFormat("default",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(t)}</div>
              <div class="tip">Account: ${"IMPS"===a?.payType?a.imps:a.upi}</div>
              ${15===a.status?'<div class="warn"><img src="image/icon-warn.png"><span>Account info error.Reset account info and withdraw again.</span></div>':""}
              ${16===a.status?'<div class="warn"><img src="image/icon-warn.png"><span>Please check your account info and withdraw again.</span></div>':""}
            </div>`+(e!=n-1?'<div class="border"></div>':"");var t});r.html(`
          <div class="inner"><div class="topic">
          <span><img src="image/clock.png" alt="" /> Withdrawal Record</span><img class="withdrawalRefresh" src="image/icon-refresh.png"></div>
          </div>${o?`<div class="withdrawal">${o.join(" ")}</div>`:""}<button class="close">Back</button>`);break}}!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||r.find("button.close").css("margin-bottom","30px")}function B(a,t){switch(a){case"nospin":m.html(`
        <div class="main">
          <img class="icon" src="image/big-spin.png" alt="" />
          <p>0 Spin but Only <span>‚Çπ${t.left}</span> left!</p>
          <div class="sub">${t.help?'Expect to withdraw after<br/><span class="mini">inviting two friends</span>':"Invite friends to get more spins!"}</div><button class="action">Invite For Spins</button><img class="close" src="image/close.png" alt="" />
        </div>`);break;case"getdiamond":m.html(`
        <div class="main getdiamond">
          <div class="head"><img src="image/big-diamond.png" alt="" /><img class="running" src="image/big-light.png" /></div>
          <p><span>+${t?.award}</span></p>     
        </div>`);break;case"exchange":var n=U();m.html(`
        <div class="main exchange">
          <div class="top">
            <div class="pre">
              <img src="image/big-diamond.png" alt="" /><span>${n*pa}</span>
            </div>
            <div class="nextArr"></div>
            <div class="pre">
              <img src="image/big-spin.png" alt="" /><span>${n}</span>
            </div>
          </div>
          <p>Redeem ${pa*n} gems for ${n} ${1<n?"spins":"spin"} ?</p>
          <div class="groupBtn"><span class="cancel">Cancel</span><button class="action">Redeem</button></div>          
        </div>`);break;case"daily":let e=y.signDays,i=function(a){return e.includes(a)?"finish":y?.signTimes==a+1?"today":a<y?.signTimes?"skip":""};n=y?.awardList?.map((a,e)=>`<li class="${i(e)}"><span>Day ${e+1}</span>
          ${"today"==i(e)?y.todayIsSign?'<img src="image/checkmark.png" />':'<div class="light "><img src="image/diamond.png" /><img class="running" src="image/light.png" /></div>':""}
          ${"finish"==i(e)?'<img src="image/checkmark.png" />':""}
          ${"finish"!=i(e)&&"today"!=i(e)?'<img src="image/diamond.png" />':""}
          
          <span>+${a}</span></li>`);m.html(`
        <div class="daily">
          <div class="title">Daily Rewards<img src="image/loop.png"><img src="image/loop.png"><img class="close" src="image/close.png" alt="" /></div>
          <div class="wrap">
            <ul>
              ${n.join(" ")}        
            </ul>
            ${y.todayIsSign?'<span class="action">Come Back Tomorrow</span>':'<button class="action">Claim</button>'}
          </div>
        </div>`);break;case"late":m.html(`
        <div class="main">
          <img class="icon" src="image/big-late.png" alt="" />
          <p>Sorry, the gift disappear.<br />Please come earlier next time.</p>          
          <button class="action">I KNOW</button>
        </div>`);break;case"happy":m.html(`
        <div class="main">
          <img class="icon" src="image/big-flower.png" alt="" />
          <p>Congratulations!</p>
          <div class="sub">You Get <span>${t?.chance||3}</span> ${t?.chance?"Spin":"Spins"}</div>
          <button class="action">${t?.btnTxt||"GO TO SPIN!"} </button>          
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"double":m.html(`
        <div class="main">          
          <div class="double"><div class="l"><img class="before" src="image/icon-gold.png"/><span>‚Çπ${t?.got/2}</span></div><img class="change" src="image/change.png"/><div class="r"><img  class="after" src="image/two-gold.png"/><span>‚Çπ${t.got}</span></div></div>
          <p>So lucky! You can <br /><span class="mini">Double Your Reward</span><br />this time!</p>
          <button class="action">Click To Double</button>
          <img class="cancel" src="image/close.png" alt="" /> 
        </div>`);break;case"got":m.html(`
        <div class="main">
          <img class="icon" src="image/big-gold.png" alt="" />
          <p>You got <span>‚Çπ${t.got}</span> !</p>
          <div class="sub">Only <span class="mini">‚Çπ${t.left}</span> left to withdraw ‚Çπ${t.target}!</div>
          <button class="action">GO ON!</button>          
        </div>`);break;case"winning":m.html(`
        <div class="main">
          <img class="icon" src="image/big-flower.png" alt="" />
          <p><span>‚Çπ${t.win}</span> Can Be Cashed Out</p>
          ${t.sub?'<div class="sub">You Get <span>3</span> More Spins!</div>':""}          
          <button class="action">Cash Out</button>          
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"rupee10":m.html(`
        <div class="main">     
          <img class="icon" src="image/big-rupee10.png" alt="" />     
          <p><span>‚Çπ10</span><br/> Can Be Cashed Out Now!</p>              
          <button class="action">Cash Out</button>          
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"join":m.html(`
        <div class="main">
          <img class="icon" src="image/big-spin.png" alt="" />
          <p>üéâ Join Channel & Get <span>${t?.chance||3}</span> ${t?.chance?"Spin":"Spins"}!</p>
          ${t?.user?`<div class="sub">üéÅ And ${t?.user} Get <span>1</span> Spin! üëç</div>`:""}
          <button class="action">Join Channel & Get ${t?.chance?"Spin":"Spins"}</button>
          ${t?.chance?'<img class="close" src="image/close.png" alt="" />':""}
        </div>`);break;case"findo":x("Channel hasn't joined."),m.html(`
        <div class="main">
          <img class="icon" src="image/big-zoom.png" alt="" />          
          <div class="sub">üí° Must Join Our Channel Before Playing</div>          
          <button class="action">Join @${ha}</button>          
        </div>`);break;case"invite":m.html(`
        <div class="main">
          <img class="icon" src="image/big-invite.png" alt="" />
          <p>You have invited ${t.friends} friends!<br />You get ${t.spins} more spins!</p>
          <div class="sub"><img class="pic" src="image/face.png" alt="" /> {otherName00}<br /><img class="pic" src="image/face.png" alt="" /> {otherName01}</div>          
          <button class="action">GO TO SPIN!</button>
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"check":m.html(`
        <div class="main">
          <img class="icon" src="image/big-card.png" alt="" />
          <p>Check your withdrawal account!</p>
          <div class="sub" style="text-align: left;">Withdrawal Amout: ‚Çπ${w?.balance||""}</div>
          <div class="sub" style="text-align: left;">Name: ${w?.name||""}</div>          
          <div class="sub" style="text-align: left;">UPI ID: ${w?.upi||""}</div>          
          <div class="groupBtn"><button>Cancel</button><button class="action">Confirm</button></div>
        </div>`);break;case"limit":m.html(`
        <div class="main">
          <img class="icon" src="image/big-invite.png" alt="" />          
          <div class="sub">You need to invite at least <span>3</span> friend to play before withdrawing.</div>          
          <button class="action">Invite Now!</button>          
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"withdrawn":m.html(`
        <div class="main">
          <img class="icon" src="image/big-flower.png" alt="" />
          <p>You are withdrawing <span>‚Çπ${t.amount}</span> !</p>
          <div class="sub">We will review it fast and it is expected to be credited in 1-7 days.</div>          
          <button class="action">TELL FRIENDS!</button>          
          <img class="close" src="image/close.png" alt="" />
        </div>`);break;case"wish":{let a=Number((t.win/500*100).toFixed(2)),e=Number((b/500*100).toFixed(2));m.html(`
        <div class="main wish">
          <div class="sub">
            <b>Accept</b>: Start from <span>‚Çπ${b}</span> & spin for ‚Çπ500<br />
            <b>Refuse</b>: Withdraw ‚Çπ${t.win} but <i>amount reset</i>
          </div>
          <div class="progress">
            <div class="balance"><img src="image/icon-gold.png" alt="" /><span>‚Çπ100</span></div>
            <div class="line">
              <div class="fill1" style="width:${a}%"></div>
              <div class="fill2" style="width:${e}%"></div>
              <div class="goal">‚Çπ500</div>
            </div>
            <p>Only <span>‚Çπ${500-b}</span> to cash out ‚Çπ500 !</p>
          </div>
          <button class="action">Accept Blessing</button>
          <div class="gave-up">Withdraw Now</div>
          <img class="god" src="image/god.png" alt="" />
          <img class="god-circle running" src="image/god-circle.png" alt="" />          
          <img class="bless" src="image/bless.png" alt="" />
        </div>`),m.css("display","flex"),$startEle=m.find(".balance > span"),$lineEle=m.find(".line > .fill2"),setTimeout(()=>{Ia($startEle,100,b,2e3,null,!0),Ia($lineEle,a,e,2e3,null,!1)},700);break}case"shock":{n=Number((b/500*100).toFixed(2));m.html(`
        <div class="main shock">
          <img class="icon" src="image/shock.png" alt="" />
          <p>Are you sure you want to withdraw now?</p>
          <div class="sub">You can withdraw ‚Çπ100 now <br />But your amount will be reset to</div>
          <div class="progress">
            <div class="balance"><img src="image/icon-gold.png" alt="" /><span>‚Çπ0</span></div>
            <div class="line">
              <div class="fill1"></div>
              <div class="goal">‚Çπ500</div>
            </div>
          </div>
          <button class="action">Accept Blessing</button>
          <button>Withdraw Now</button>          
        </div>`),m.css("display","flex");let a=m.find(".line > .fill1");a.css("width",n+"%"),setTimeout(function(){a.animate({width:"0%"},1500,"linear")},500);break}}m.css("display","flex")}function Ya(){var a=r.find(".super");let i=a.find(".user"),t=a.find("p"),n=0;!function a(){var e;-280<n?(n+=-40,i.css("transform",`translateY(${n}px)`),setTimeout(a,1e3/Math.abs(7))):(e=i.clone().css({transform:"",transition:"",position:"static"}),t.after(e),i.remove())}()}function Ga(a,e){switch(m.css("display","none"),a){case"GO ON!":if(w.times){if(prevAmount){let{got:a,prevDrawAmount:e,prevLeft:i,left:t,prevPercentage:n,percentage:s}=prevAmount,l=(prevAmount=null,p.find(".balance > span")),o=p.find(".balance > i"),c=p.find(".line > .fill"),r=p.find("p > span"),d=T.add(e,a);r.text(i),c.css("width",n+"%"),o.text("+‚Çπ"+a),o.show(),c.addClass("show"),Ia(l,e,d,2e3,function(){r.text("‚Çπ"+t),l.text("‚Çπ"+d),o.hide(),c.removeClass("show")},!0),Ia(c,n,s,2e3,null,!1)}}else{var{activityLimitAmount:i,drawAmount:t}=w,n=T.sub(i,t);sa?Pa(n,i):(r.html(""),r.css("display","flex"),F("super",{left:n,win:t,list:Ca(t)}),Ya())}break;case"Click To Double":Oa();break;case"I KNOW":d.css("display","none");break;case"Claim":m.css("display","flex"),Ea(!0);break;case"Invite For Spins":r.css("display","none"),M();break;case"Accept Blessing":D(!1,!0);break;case"GO TO SPIN!":Na();break;case"Cancel":r.html(""),r.css("display","flex"),F("wallet",w);break;case"Withdraw Now":e?.flag?B("shock"):(O(!0),D());break;case"Cash Out":O();break;case"Continue":D(!0);break;case"Check":Ma();break;case"Confirm":r.find("button.save").prop("disabled",!0),S("/activity/applyWithdraw",{body:{payType:"UPI"}}).then(({code:a})=>{10037===a?B("limit"):(r.css("display","none"),B("withdrawn",{amount:w?.balance||0}),D())}).finally(()=>{r.find("button.save").prop("disabled",!1)});break;case"Redeem":i=U();n=1,t=3,l=i*pa,S("/account/accountExchange",{body:{sourceWalletType:n,targetWalletType:t,sourceCnt:l,targetCnt:o=i}}).then(({data:a,message:e})=>{a?(k.diamonds=Number(k.diamonds)-Number(l),B("happy",{chance:o,btnTxt:"OK"}),R(Number(w.times)+Number(o)),P()):x(e)}).finally(()=>{});break;case"Invite Now!":case"TELL FRIENDS!":M();break;case"Join @findolucky":case"Join @ldtestch":case"Join Channel & Get Spin":case"Join Channel & Get Spins":{m.css("display","flex");let e="Join Channel & Get Spin"===a;e?W("JoinTrafficChannel"):W("JoinMainChannel");var s=e?X:"https://t.me/"+ha;Telegram.WebApp.openTelegramLink(s),setTimeout(()=>{var a=e?"Check":"Continue";m.find("img.close").hide(),(0<m.find("p").length?(m.find("div.sub").hide(),m.find("p")):m.find("div.sub")).text("Already joined the channel?"),m.find("button.action").text(a)},1e3);break}}var l,o}function _a(a){var{balance:e=0,drawAmount:i,waitAuditAmount:t,withdrawnAmount:n}=w,s=encodeURIComponent((s=I+"_"+fa,s=CryptoJS.enc.Utf8.parse(s),CryptoJS.enc.Base64.stringify(s))),s=`https://t.me/${C[A].tgBotName}/app?startapp=`+s,l=encodeURIComponent(s),e=T.add(e,i,t,n);return{textCode:a||`I‚Äôve won ‚Çπ${e}! Click URL To Help Me Get More! You Can Also Play & WIN MONEY!`,urlcode:l,urlLink:s}}function M(a,e,i){var{textCode:t,urlcode:n}=_a(a);let s="";if(e){switch(i){case"facebook":s="https://www.facebook.com/sharer/sharer.php?u="+n;break;case"whatsapp":s=`https://api.whatsapp.com/send?text=${encodeURIComponent(t)} `+n;break;case"twitter":s=`https://twitter.com/intent/tweet?url=${n}&text=`+encodeURIComponent(t)}Telegram.WebApp.openLink(s)}else s=`https://t.me/share/url?url=${n}&text=`+encodeURIComponent(t),Telegram.WebApp.openTelegramLink(s)}function Ja(){let{name:a,upi:e,imps:i,mobile:t,phoneZone:n}=w;l.find("input").val(""),l.css("display","flex");let s=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);setTimeout(()=>{l.find(".code > span").text(n||"91"),l.find(".name").val(a||""),l.find(".upi").val(e||""),l.find(".imps").val(i||""),l.find(".mobile").val(t||""),s&&l.css({paddingBottom:"400px"})},500)}async function za(){c.css("display","flex"),r.html(""),r.addClass("nopad"),r.css("display","unset"),await Fa(),F("gems",{tasks:da})}function U(){var a=k.diamonds,e=pa;return a<e?0:Math.floor(a/e)}fetch("https://ip.livout.in",{method:"GET"}).then(a=>(a.ok||Telegram.WebApp.showAlert("Network Error, Please Reload Page"),a.text())).then(a=>{u=a||null,La(),Fa(),async function(){var a=(await S("/account/queryUserWallet",{body:{walletType:1}})).data;a&&(k.diamonds=a.balance||0);P()}(),D(!0),Ua(!0),S("/activity/checkShowAddTimesIcon").then(({data:a})=>{a?.showAddTimesIconFlag&&(f=a?.channelId,V=a?.channelName,X=a?.inviteLink,d.css("display","flex"),e&&clearInterval(e),e=setInterval(()=>{d.find(".gift > img").toggleClass("running")},1500))}),Ta()}).catch(a=>{Telegram.WebApp.showAlert("Network Error, Please Reload Page")}),W("viewPage"),$("#header li").click(function(){var a;switch($(this).index()){case 0:ya(),a=(new Date).getTime(),$.getJSON("data/rank.json?v="+a,function(a){ra=a,F("rank"),c.css("display","none")}).fail(function(){x("get rank data error"),c.css("display","none")});break;case 1:_.hide(),Ua();break;case 2:O()}}),$("#app > img").click(function(){switch($(this).index()){case 1:M("",!0,"whatsapp");break;case 2:M("",!0,"twitter");break;case 3:M("",!0,"facebook")}}),r.on("click","ul.invitation > li",function(a){var e=$(this).index(),i=($(this).siblings().removeClass("active"),$(this).addClass("active"),r.find(".switch").show(),r.find(".topic > span > i")),t=r.find(".switch > .latitude > span");switch(r.find(".switch > p").html(""),e){case 0:t.text("Today"),i.text("Daily Invitation Top 100"),N("Daily"),L("today");break;case 1:t.text("This Week"),i.text("Weekly Invitation Top 100"),N("Weekly"),L("week")}}),r.on("click",".switch > .latitude",function(){var a=$(this).text().trim().toLowerCase(),e=r.find(".switch > .latitude > span");switch(r.find(".switch > p").html(""),a){case"this week":e.text("Last Week"),L("last_week");break;case"last week":e.text("This Week"),N("Weekly"),L("week");break;default:var i="today"===a?"Yesterday":"Today";"Today"===i&&N("Daily"),e.text(i),L(i.toLowerCase())}}),t.click(function(){W("shareBtn"),M()}),H.click(function(){var{textCode:a,urlLink:e}=_a();navigator.clipboard?.writeText(e+`
`+a).then(()=>{x("Text copied! Share with your friends!")})}),h.click(Na),d.click(function(){W("+1Spin"),Ma()}),s.click(function(){ia?Aa()&&!ta&&(ta=!0,S("/gift/receiveCountdownGift",{body:{activityId:v}}).then(({data:a})=>{a?.receiveSuccessFlag&&(W("countdownGift"),R(w.times+1),ia=!1,B("happy",{chance:1}),Ta())}).finally(()=>{ta=!1})):x("You can't claim it yet")}),a.click(function(){za()}),l.on("click","button.msgBtn",function(){Y.prop("disabled",!0),Telegram.WebApp.requestContact(function(a){function e(){S("/user/getUserInfo").then(({data:a})=>{a?.mobile?(clearInterval(la),c.css("display","none"),l.find(".code > span").text(a?.phoneZone),l.find("input.mobile").val(a?.mobile),x("Get Mobile Successfully")):++oa>=ca&&(clearInterval(la),c.css("display","none"),x("Please Try Again"))}).catch(a=>{clearInterval(la),c.css("display","none"),x("Please Try Again")})}Y.prop("disabled",!1),a?(c.css("display","flex"),oa=0,la=setInterval(e,3e3),setTimeout(()=>{e()},1e3)):Telegram.WebApp.showAlert("Mobile is required for withdrawal!")})}),l.on("click","button.save",function(){var a=l.find(".name").val()?.trim(),e=l.find(".upi").val()?.trim(),i=l.find(".mobile").val()?.trim(),t=l.find(".code > span").text()?.trim(),n=[];a||n.push("name"),e||n.push("UPI ID"),i||n.push("mobile number"),t||n.push("phoneZone"),0<n.length?(n="Please Complete The Following Information: "+n.join(", "),Telegram.WebApp.showAlert(n)):/^[A-Za-z .]+$/.test(a)?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9]+$/.test(e)?/^[6789]\d{9}$/.test(i)?(G.prop("disabled",!0),S("/activity/updateAccount",{body:{name:a,upi:e,mobile:i,phoneZone:t}}).then(({})=>{x("Account information has been updated"),l.css("display","none"),O()}).finally(()=>{G.prop("disabled",!1)})):Telegram.WebApp.showAlert("Mobile Number Invalid"):Telegram.WebApp.showAlert("UPI ID Invalid"):Telegram.WebApp.showAlert("Name Invalid")}),l.on("click","button.back",function(){l.css("display","none"),O()}),m.on("click","img.close",function(){r.removeClass("nopad"),$(".shareWrap").show(),$(".ring.running").show(),m.css("display","none"),r.css("display","none")}),m.on("click","img.cancel",function(){m.css("display","none"),Oa()}),m.on("click","span.cancel",function(){m.css("display","none")}),m.on("click","button",function(){Ga($(this).text().trim())}),m.on("click",".gave-up",function(){Ga("Withdraw Now",{flag:!0})}),r.on("click","button",function(){var a=$(this).text(),e=$(this).data("task");if(e){var i=$(this).data("type"),t=$(this).data("status"),n=$(this).data("demand")||null;1==t&&!async function(a,e){c.css("display","flex");var i=(await S("/task/receiveTaskAward",{body:{taskId:a}})).data;"none"==e?Fa():i?(Fa(),r.find(".task-item-"+a).eq(0).replaceWith(`<div class="task-item-${a} r row"><img src="image/checkmark.png" alt="" /><span>+${i?.award}</span></div>`),B("getdiamond",i),k.diamonds=Number(k.diamonds)+Number(i.award),setTimeout(()=>{m.css("display","none")},1800),P()):(r.find(`.task-item-${a} .btn.action.recive`).addClass("disabled").attr("data-status",0),x("Task not completed")),c.css("display","none")}(e),0===t&&x("Task not completed"),i&&!async function(a,e){6==a||5==a||7==a?(setTimeout(()=>{r.find(`.task-item-${e.task} .btn.action.recive`).removeClass("disabled").attr("data-status",1)},3e3),Telegram.WebApp.openTelegramLink(e.taskDemand)):2==a?(setTimeout(()=>{r.find(`.task-item-${e.task} .btn.action.recive`).removeClass("disabled").attr("data-status",1)},3e3),Telegram.WebApp.openLink(e.taskDemand)):3!=a&&4!=a||(W("shareBtn"),M())}(i,{taskDemand:n,task:e})}else{t=a.trim();switch(!0){case t.includes("Edit"):Ja();break;case t.includes("Withdrawal Record"):Ba();break;case"Cash Out"===t:0<w?.balance?w?.upi?100<=w?.balance?B("check"):Telegram.WebApp.showAlert("Minimum withdraw is ‚Çπ100"):(r.css("display","none"),x("Please Set Account Info"),Ja()):Telegram.WebApp.showAlert("No Amount Can Be Cashed Out");break;case"Back"===t:r.html(""),r.css("display","flex"),F("wallet",w);break;case"Invite For Spins"===t:r.css("display","none"),M();break;case"Redeem Spins"===t:B("exchange");break;case"Remind"===t:M("You haven't joined the channel yet! We can both earn cash rewards after you join the channel!");break;case"OK"===t:var{activityLimitAmount:s,drawAmount:l}=w;Pa(T.sub(s,l),s);break;case"Claim"===t:Ea();break;default:$(".ring.running").show(),$(".shareWrap").show(),r.css("display","none"),r.removeClass("nopad"),clearInterval(ea)}}}),r.on("click","img.cancel",function(){r.css("display","none")}),r.on("click","img.inviteRefresh",function(){Ua()}),r.on("click","img.withdrawalRefresh",function(){Ba()}),z.change(function(){$(this).is(":checked")?localStorage.setItem("skip",1):localStorage.setItem("skip",0)}),r.on("click",".refresh-box",async function(){za()})});